select distinct a.name from users u left join user_accounts ua on u.userkey=ua.userkey left join accounts a on ua.accountkey=a.accountkey where a.name=u.username or a.name=concat('NDA"


select distinct a.name from accounts a join user_accounts ua on a.accountkey=ua.accountkey join users u on ua.userkey=u.userkey where a.name=u.username or a.name=concat('NDA',u.lastname,substr(u.firstname,1,1))


(&(objectClass=group)(CN=TestAllowInteractiveLogin)),
(&(objectClass=group)(CN=TestDenyInteractiveLogin))

Name : PAM ADM Approval Email Template
To : kkrishna@cambridgeassociates.com
Cc :
Subject : Approval Notification - Action Required
Bcc :
From : CAIGANotifications-test@saviynt.com


select hr.Name as 'Rule Name',hr.description 'Rule Description',hra.objectvalue from hanarule hr join hanaruleattribute hra on hr.hanarulekey=hra.hanarule where hra.conditionoraction like 'ACTN' and hr.type=2 and hra.objectname=21 and hr.name like 'CA_RBAC%'

RULE NAME	RULE DESCRIPTION	OBJECTVALUE
CA_RBAC - Location, Cost center and User Type		44,45,46,58,48,49,50,51,52
CA_RBAC - Location, Cost center and User Type - FeedFile import		44,45,46,58,48,49,50,51,52
CA_RBAC_Joiner_UUR		161,162,163
CA_RBAC_Joiner_UUR_Import		161,162,163
CA_RBAC_Mover_CostCenter_ExceptionTransferRule_Import		129,130,131
CA_RBAC_Mover_CostCenter_Rule_Import		161,162,163
CA_RBAC_Mover_CostCenter_Rule_UI		161,162,163
CA_RBAC_Mover_Provision_UUR_Import		129,130,131
CA_RBAC_Mover_Provision_UUR_UI		129,130,131
CA_RBAC_Mover_UserType		108,109

RqG9PerZTDK8d3cPWZi7

select hr.Name as 'Rule Name',hr.description 'Rule Description',hra.objectvalue from hanarule hr join hanaruleattribute hra on hr.hanarulekey=hra.hanarule where hra.conditionoraction like 'ACTN' and hr.type=2 and hra.objectname=21 and hr.name like 'CA_RBAC%'






SELECT 
    hr.Name AS 'Rule Name',
    SUBSTRING_INDEX(SUBSTRING_INDEX(hra.objectvalue, ',', numbers.n), ',', -1) AS 'Object Value'
FROM 
    hanarule hr
JOIN 
    hanaruleattribute hra ON hr.hanarulekey = hra.hanarule
JOIN
    (SELECT 1 n UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
     UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8
     UNION ALL SELECT 9 UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12
     UNION ALL SELECT 13 UNION ALL SELECT 14 UNION ALL SELECT 15 UNION ALL SELECT 16
     UNION ALL SELECT 17 UNION ALL SELECT 18 UNION ALL SELECT 19 UNION ALL SELECT 20) numbers ON CHAR_LENGTH(hra.objectvalue) - CHAR_LENGTH(REPLACE(hra.objectvalue, ',', '')) >= numbers.n - 1
WHERE 
    hra.conditionoraction LIKE 'ACTN' 
    AND hr.type = 2 
    AND hra.objectname = 21 
    AND hr.name LIKE 'CA_RBAC%'
ORDER BY 
    hr.Name, hra.objectvalue, 'Object Value' ASC;
    
    
    SELECT hr.Name AS 'Rule Name', 
       TRIM(SUBSTRING(SUBSTRING_INDEX(hra.objectvalue, ',', numbers.n), 
       LENGTH(SUBSTRING_INDEX(hra.objectvalue, ',', numbers.n - 1)) + 1)) AS 'Object Value'
FROM hanarule hr 
JOIN hanaruleattribute hra ON hr.hanarulekey = hra.hanarule 
JOIN (SELECT 1 n UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
      UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8
      UNION ALL SELECT 9 UNION ALL SELECT 10) numbers ON CHAR_LENGTH(hra.objectvalue) - CHAR_LENGTH(REPLACE(hra.objectvalue, ',', '')) + 1 >= numbers.n 
WHERE hra.conditionoraction LIKE 'ACTN' 
      AND hr.type = 2 
      AND hra.objectname = 21 
      AND hr.name LIKE 'CA_RBAC%' 
ORDER BY hr.Name ASC, CAST(`Object Value` AS UNSIGNED) ASC;

----------------------------------------------

SELECT hr.Name AS 'RULE NAME', CAST(hra.objectvalue AS VARCHAR(10)) AS 'OBJECTVALUE'
FROM hanarule hr 
JOIN hanaruleattribute hra 
ON hr.hanarulekey=hra.hanarule 
WHERE hra.conditionoraction LIKE 'ACTN' 
AND hr.type=2 
AND hra.objectname=21 
AND hr.name LIKE 'CA_RBAC%'
ORDER BY hr.Name, hra.objectvalue

-----------------------------------------------------

Update Accounts set accounttype='Service Account' where endpointkey=40 and name like 'svc%';
INSERT INTO accountowners(accountkey, owneruserkey, rank, updatedate, updateuser) 
SELECT a.accountkey AS accountkey, u.userkey AS owneruserkey, '1' AS rank, Now() AS updatedate, '1' AS updateuser FROM accounts a LEFT JOIN users u ON a.customproperty36 = u.username WHERE a.endpointkey = 40 AND a.status IN ( 1, 'Manually Provisioned') AND a.customproperty36 is NOT NULL;
INSERT INTO accountowners(accountkey, owneruserkey, rank, updatedate, updateuser) 
SELECT a.accountkey AS accountkey, u.userkey AS owneruserkey, '26' AS rank, Now() AS updatedate, '1' AS updateuser FROM accounts a LEFT JOIN users u ON a.customproperty36 = u.username WHERE a.endpointkey = 40 AND a.status IN ( 1, 'Manually Provisioned') AND a.customproperty36 is NOT NULL




SELECT hr.Name AS 'RULE NAME', TRIM(REPLACE(SUBSTRING(hra.objectvalue, num, CHARINDEX(',', hra.objectvalue + ',', num) - num), ',', '')) AS 'OBJECTVALUE'
FROM hanarule hr 
JOIN hanaruleattribute hra 
ON hr.hanarulekey = hra.hanarule 
CROSS JOIN (
    SELECT number AS num
    FROM master.dbo.spt_values
    WHERE type = 'P' AND number <= LEN(hra.objectvalue) + 1
) AS n
WHERE hra.conditionoraction LIKE 'ACTN' 
AND hr.type = 2 
AND hra.objectname = 21 
AND hr.name LIKE 'CA_RBAC%'
AND SUBSTRING(',' + hra.objectvalue, num, 1) = ','
ORDER BY hr.Name, hra.objectvalue
